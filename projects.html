<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Projects - Marcus Podnar</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Syne:wght@400;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="grain-overlay"></div>
    
    <header class="header">
        <div class="header-container">
            <div class="logo">
                <img src="images/logo.png" alt="Logo" />
            </div>

            <nav class="nav">
                <div class="menu-toggle" id="mobile-menu">
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </div>

                <div class="nav-links">
                    <a href="index.html">Home</a>
                    <a href="about.html">About</a>
                    <a href="skills.html">Skills</a>
                    <a href="#" class="current">Projects</a>
                    <a href="contact.html">Contact Me</a>
                    <div class="github">
                        <a href="https://github.com/TheCanadianYeti" target="_blank">
                            <img src="images/github.png" alt="Github">
                        </a>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <main class="projects-page">
        <div class="projects-container">
            <div class="projects-header">
                <div class="status-badge">
                    <span class="status-dot"></span>
                    <span class="status-text">Building & Experimenting</span>
                </div>
                
                <h1 class="projects-title">My Projects</h1>
                <p class="projects-subtitle">Explore my public repositories on GitHub</p>
                
                <p class="projects-description">
                    A collection of my work, experiments, and contributions. From web applications 
                    to network solutions, each project represents a step in my learning journey.
                </p>
            </div>

            <!-- Loading State -->
            <div id="loading" class="loading-state">
                <div class="loading-spinner"></div>
                <p>Loading projects from GitHub...</p>
            </div>

            <!-- Error State -->
            <div id="error" class="error-state" style="display: none;">
                <p>Unable to load projects. Please visit my <a href="https://github.com/TheCanadianYeti" target="_blank">GitHub profile</a> directly.</p>
            </div>

            <!-- Projects Grid -->
            <div id="projects-grid" class="projects-grid"></div>
        </div>
        
        <div class="bg-decoration deco-1"></div>
        <div class="bg-decoration deco-2"></div>
    </main>

    <script>
        // Mobile menu toggle
        const menu = document.getElementById('mobile-menu');
        const navLinks = document.querySelector('.nav-links');
        menu.addEventListener('click', () => {
            navLinks.classList.toggle('active');
            menu.classList.toggle('open');
        });

        // Fetch GitHub repositories
        async function fetchGitHubProjects() {
            const username = 'TheCanadianYeti';
            const loading = document.getElementById('loading');
            const error = document.getElementById('error');
            const projectsGrid = document.getElementById('projects-grid');

            try {
                const response = await fetch(`https://api.github.com/users/${username}/repos?sort=updated&per_page=100`);
                
                if (!response.ok) {
                    throw new Error('Failed to fetch repositories');
                }

                const repos = await response.json();
                
                // Filter out forks and sort by stars/updated date
                const publicRepos = repos
                    .filter(repo => !repo.fork && !repo.private)
                    .sort((a, b) => b.stargazers_count - a.stargazers_count || new Date(b.updated_at) - new Date(a.updated_at));

                loading.style.display = 'none';

                if (publicRepos.length === 0) {
                    error.style.display = 'block';
                    error.querySelector('p').textContent = 'No public projects found yet. Check back soon!';
                    return;
                }

                // Display repositories
                publicRepos.forEach(repo => {
                    const projectCard = createProjectCard(repo);
                    projectsGrid.appendChild(projectCard);
                });

                // Animate cards in
                const cards = document.querySelectorAll('.project-card');
                cards.forEach((card, index) => {
                    setTimeout(() => {
                        card.style.opacity = '1';
                        card.style.transform = 'translateY(0)';
                    }, index * 100);
                });

            } catch (err) {
                console.error('Error fetching GitHub repos:', err);
                loading.style.display = 'none';
                error.style.display = 'block';
            }
        }

        function createProjectCard(repo) {
            const card = document.createElement('a');
            card.className = 'project-card';
            card.href = repo.html_url;
            card.target = '_blank';
            card.style.opacity = '0';
            card.style.transform = 'translateY(20px)';
            card.style.transition = 'opacity 0.5s, transform 0.5s';

            // Get language color
            const languageColor = getLanguageColor(repo.language);

            card.innerHTML = `
                <div class="project-card-header">
                    <div class="project-icon">
                        <svg width="20" height="20" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M2 2.5A2.5 2.5 0 014.5 0h8.75a.75.75 0 01.75.75v12.5a.75.75 0 01-.75.75h-2.5a.75.75 0 110-1.5h1.75v-2h-8a1 1 0 00-.714 1.7.75.75 0 01-1.072 1.05A2.495 2.495 0 012 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 011-1h8zM5 12.25v3.25a.25.25 0 00.4.2l1.45-1.087a.25.25 0 01.3 0L8.6 15.7a.25.25 0 00.4-.2v-3.25a.25.25 0 00-.25-.25h-3.5a.25.25 0 00-.25.25z"></path>
                        </svg>
                    </div>
                    <h3 class="project-name">${repo.name}</h3>
                </div>
                
                <p class="project-description">${repo.description || 'No description provided'}</p>
                
                <div class="project-meta">
                    ${repo.language ? `
                        <div class="project-language">
                            <span class="language-dot" style="background-color: ${languageColor}"></span>
                            <span>${repo.language}</span>
                        </div>
                    ` : ''}
                    
                    <div class="project-stars">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M8 .25a.75.75 0 01.673.418l1.882 3.815 4.21.612a.75.75 0 01.416 1.279l-3.046 2.97.719 4.192a.75.75 0 01-1.088.791L8 12.347l-3.766 1.98a.75.75 0 01-1.088-.79l.72-4.194L.818 6.374a.75.75 0 01.416-1.28l4.21-.611L7.327.668A.75.75 0 018 .25z"></path>
                        </svg>
                        <span>${repo.stargazers_count}</span>
                    </div>
                    
                    <div class="project-forks">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M5 3.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm0 2.122a2.25 2.25 0 10-1.5 0v.878A2.25 2.25 0 005.75 8.5h1.5v2.128a2.251 2.251 0 101.5 0V8.5h1.5a2.25 2.25 0 002.25-2.25v-.878a2.25 2.25 0 10-1.5 0v.878a.75.75 0 01-.75.75h-4.5A.75.75 0 015 6.25v-.878zm3.75 7.378a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm3-8.75a.75.75 0 100-1.5.75.75 0 000 1.5z"></path>
                        </svg>
                        <span>${repo.forks_count}</span>
                    </div>
                </div>
                
                <div class="project-footer">
                    <span class="project-updated">Updated ${formatDate(repo.updated_at)}</span>
                </div>
            `;

            return card;
        }

        function getLanguageColor(language) {
            const colors = {
                'JavaScript': '#f1e05a',
                'Python': '#3572A5',
                'Java': '#b07219',
                'HTML': '#e34c26',
                'CSS': '#563d7c',
                'TypeScript': '#2b7489',
                'C++': '#f34b7d',
                'C': '#555555',
                'Go': '#00ADD8',
                'Rust': '#dea584',
                'PHP': '#4F5D95',
                'Ruby': '#701516',
                'Shell': '#89e051',
                'Swift': '#ffac45',
                'Kotlin': '#F18E33',
                'Dart': '#00B4AB',
                'C#': '#178600'
            };
            return colors[language] || '#8b949e';
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const diffTime = Math.abs(now - date);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

            if (diffDays === 0) return 'today';
            if (diffDays === 1) return 'yesterday';
            if (diffDays < 7) return `${diffDays} days ago`;
            if (diffDays < 30) return `${Math.floor(diffDays / 7)} weeks ago`;
            if (diffDays < 365) return `${Math.floor(diffDays / 30)} months ago`;
            return `${Math.floor(diffDays / 365)} years ago`;
        }

        // Load projects when page loads
        document.addEventListener('DOMContentLoaded', fetchGitHubProjects);
    </script>
</body>
</html>
